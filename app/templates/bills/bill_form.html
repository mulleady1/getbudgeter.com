<wa-drawer
  {% if bill.id %}
    label="Edit Bill"
  {% else %}
    label="Add Bill"
  {% endif %}
  hx-on::load="setTimeout(() => this.open = true, 100)"
  hx-on:wa-after-hide="this.remove()"
  hx-on::config-request="event.detail.headers['X-CSRFToken'] = this.querySelector('[name=csrfmiddlewaretoken]').value"
  hx-on::after-request="if (event.detail.successful) this.open = false"
>
  <form
    id="bill-form"
    {% if bill.id %}
      hx-put="{% url 'edit_delete_bill' bill.id %}"
    {% else %}
      hx-post="{% url 'bills' %}"
    {% endif %}
    hx-target="#bills-list"
    hx-swap="outerHTML"
    style="display: flex; flex-direction: column; gap: 1rem;"
  >
    {% csrf_token %}

    <wa-input name="name" label="Bill name" value="{{ bill.name }}" required style="width: 100%;"></wa-input>

    <wa-input
      type="number"
      name="amount"
      label="Amount"
      step="0.01"
      value="{{ bill.amount }}"
      required
      style="width: 100%;"
    ></wa-input>

    <wa-input
      type="url"
      name="link"
      label="Link (optional)"
      value="{{ bill.link|default:'' }}"
      style="width: 100%;"
    ></wa-input>

  </form>

  <div slot="footer" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
    <wa-button appearance="outlined" onclick="this.closest('wa-drawer').open = false" style="margin-top: 1rem; width: 100%;">Cancel</wa-button>
    <wa-button type="submit" form="bill-form" style="margin-top: 1rem; width: 100%;">Save</wa-button>
  </div>
</wa-drawer>
