<wa-dialog
  label="Copy Bills"
  hx-on::load="setTimeout(() => this.open = true, 100)"
  hx-on:wa-after-hide="this.remove()"
  hx-on::config-request="event.detail.headers['X-CSRFToken'] = this.querySelector('[name=csrfmiddlewaretoken]').value"
  hx-on::after-request="if (event.detail.successful) this.open = false"
>
  <form id="copy-bills-form" hx-post="{% url 'copy' %}" hx-target="#bills-list">
    {% csrf_token %}

    <wa-input
      type="month"
      name="source_month"
      label="Copy from"
      value="{{ source_month|date:'Y-m' }}"
      required
    ></wa-input>

    <input type="hidden" name="target_month" value="{{ target_month|date:'Y-m' }}" />
  </form>

  <div slot="footer">
    <wa-button appearance="outlined" onclick="this.closest('wa-dialog').open = false">Cancel</wa-button>
    <wa-button type="submit" form="copy-bills-form" variant="primary">Copy</wa-button>
  </div>
</wa-dialog>
