{% extends "app/base.html" %}

{% block content %}
  <div style="max-width: 1200px; margin: 0 auto; padding: 1.5rem 1rem 100px;">
    <h1 style="margin-bottom: 1.5rem;">Analytics</h1>

    <div style="margin-bottom: 1.5rem;">
      <wa-button-group>
        <wa-button href="{% url 'transactions' %}" appearance="plain">Transactions</wa-button>
        <wa-button href="{% url 'analytics' %}" appearance="plain">Analytics</wa-button>
        <wa-button href="{% url 'budgets' %}" appearance="plain">Budgets</wa-button>
      </wa-button-group>
    </div>

    <div
      style="background: #f5f5f5; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; display: flex; gap: 2rem; justify-content: space-around;"
    >
      <div>
        <p style="margin: 0; color: #666; font-size: 0.875rem;">Total Transactions</p>
        <p style="margin: 0.25rem 0 0 0; font-size: 1.5rem; font-weight: 600;">{{ total_transactions }}</p>
      </div>
      <div>
        <p style="margin: 0; color: #666; font-size: 0.875rem;">Total Spent</p>
        <p style="margin: 0.25rem 0 0 0; font-size: 1.5rem; font-weight: 600; color: #d32f2f;">${{ total_spent|floatformat:2 }}</p>
      </div>
      <div>
        <p style="margin: 0; color: #666; font-size: 0.875rem;">Date Range</p>
        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem;">
          {{ start_date|date:"m/d/Y" }} - {{ end_date|date:"m/d/Y" }}
        </p>
      </div>
    </div>

    {% if category_chart %}
      <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        {{ category_chart|safe }}
      </div>
    {% endif %}

    {% if trend_chart %}
      <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        {{ trend_chart|safe }}
      </div>
    {% endif %}

    {% if merchant_chart %}
      <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        {{ merchant_chart|safe }}
      </div>
    {% endif %}

    {% if not category_chart and not trend_chart and not merchant_chart %}
      <p style="text-align: center; padding: 3rem; color: #666;">
        No transaction data available. Upload some transactions to see analytics.
      </p>
    {% endif %}
  </div>
{% endblock %}
