{% csrf_token %}

<wa-dialog label="Upload CSV" style="--width: 600px;">
  <form
    hx-post="{% url 'upload_csv' %}"
    hx-encoding="multipart/form-data"
    hx-swap="outerHTML"
  >
    {% if error %}
      <wa-callout variant="danger" style="margin-bottom: 1rem;">
        <wa-icon slot="icon" name="exclamation-triangle"></wa-icon>
        {{ error }}
      </wa-callout>
    {% endif %}

    <div style="margin-bottom: 1rem;">
      <label for="bank_type" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Type</label>
      <select id="bank_type" name="bank_type" required style="width: 100%;">
        <option value="">Select a type...</option>
        <option value="citi">Citi</option>
        <option value="capital_one">Capital One</option>
      </select>
    </div>

    <div style="margin-bottom: 1rem;">
      <label for="csv_file" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Select CSV File</label>
      <input type="file" id="csv_file" name="csv_file" accept=".csv" required style="width: 100%;" />
      <p style="margin-top: 0.5rem; color: #666; font-size: 0.875rem;">
        Supported formats: Citi, Capital One (max 5MB)
      </p>
    </div>

    <div style="display: flex; gap: 0.5rem; justify-content: flex-end; margin-top: 1.5rem;">
      <wa-button appearance="outlined" onclick="this.closest('wa-dialog').open = false">Cancel</wa-button>
      <wa-button type="submit">Upload</wa-button>
    </div>
  </form>
</wa-dialog>
